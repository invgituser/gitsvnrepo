<ui:composition xmlns="http://www.w3.org/1999/xhtml"
                xmlns:h="http://java.sun.com/jsf/html"
                xmlns:f="http://java.sun.com/jsf/core"
                xmlns:ui="http://java.sun.com/jsf/facelets"
                xmlns:p="http://primefaces.org/ui"
                xmlns:pe="http://primefaces.org/ui/extensions"
                template="/WEB-INF/template.xhtml">

<f:metadata>
    <f:viewParam name="advisor" value="#{ltamprofile.beanAdvisor}"/>
    <f:viewParam name="rep" value="#{ltamprofile.beanRep}"/>
    <f:viewParam name="TimeToSaveID" value="#{ltamprofile.beanTimeToSaveID}"/>
    <f:viewParam name="amount" value="#{ltamprofile.beanAmount}"/>
    <f:viewParam name="first" value="#{ltamprofile.beanfirstname}"/>
    <f:viewParam name="last" value="#{ltamprofile.beanlastname}"/>
    <f:event type="preRenderView" listener="#{ltamprofile.preRenderView}"/>
</f:metadata>

<ui:define name="content">
<h:outputScript name="/js/ltamCharts.js" library="ltam"/>

<!-- BOX START -->
<h:form id="ltamForm">
<p:dialog widgetVar="dlgWelcome" closable="false" appendTo="@(body)"
          visible="#{ltamprofile.welcomeDialog}">
    <p:panel id="intropanel" style="border: 0px; background: transparent; width: 400px">

        <div class="layout-portlets-box">

            <div class="Container100 Responsive50">
                <div class="Container100 Responsive50">
                    <div class="ContainerIndent TexAlCenter">
                        <h1>
                            You have entered<br/>
                            iAdvice
                        </h1>

                        <div class="EmptyBox10"></div>
                        Clients have trusted Ladenburg Thalmann Asset Management
                        to manage over $2 billion of their assets.<br/>

                        <div class="EmptyBox20"></div>
                        See what LTAM has to offer by answering a few short questions
                        to help us build you a risk managed portfolio customized to your
                        financial needs.
                        <div class="EmptyBox10"></div>
                        <div class="Fs8 TexAlCenter">
                            You are leaving the website of individual(s) who are registered representatives
                            of an  Affiliate of Ladenburg Thalmann Asset Management, Inc. (LTAM) and have
                            entered LTAM's iAdvice Website. The individual(s) of the Affiliate will receive a
                            referral fee for referring you to this site.
                        </div>
                        <p:commandButton value="Get Started"
                                         onclick="PF('dlgWelcome').hide()">
                        </p:commandButton>
                    </div>
                </div>
            </div>
        </div>

    </p:panel>
</p:dialog>

<p:panel id="contentpanel" style="border: 0px; background: transparent">

<div class="layout-portlets-box">

    <div class="Container100 Responsive100">
        <div class="Container100 Responsive100">
            <div class="ContainerIndent Responsive100">
                            <p:steps id="ltamprogressbar" activeIndex="#{ltamprofile.ltammenu}">
                                <p:menuitem value="Start"/>
                                <p:menuitem value="Goal" />
                                <p:menuitem value="Horizon"/>
                                <p:menuitem value="Risk"/>
                                <p:menuitem value="Risk"/>
                                <p:menuitem value="Risk"/>
                                <p:menuitem value="Review"/>
                            </p:steps>
           </div>
            <div class="Container100 Responsive100">
                <div class="ContainerIndent Responsive100">
                  <p:messages showDetail="false" escape="true" closable="true"/>
                </div>
             </div>
        </div>
   </div>
    <div class="Container100 Responsive100">
        <div class="Container60 Responsive100">
            <p:panel id="inputArea" style="border: 0px; background: transparent; height: 270px">
                <ui:fragment rendered="#{ltamprofile.pagemanager.page == 0}">
                    <ui:fragment rendered="#{ltamprofile.visitorMode}">
                        <ui:include src="/addon/page1.xhtml"/>
                    </ui:fragment>
                    <ui:fragment rendered="#{ltamprofile.visitorMode ? 'false' : 'true'}">
                        <ui:include src="/addon/page1A.xhtml"/>
                    </ui:fragment>
                </ui:fragment>
                <ui:fragment rendered="#{ltamprofile.pagemanager.page == 1}">
                    <ui:include src="/addon/page2.xhtml"/>
                </ui:fragment>
                <ui:fragment rendered="#{ltamprofile.pagemanager.page == 2}">
                    <ui:include src="/addon/page3.xhtml"/>
                </ui:fragment>
                <ui:fragment rendered="#{ltamprofile.pagemanager.page == 3}">
                    <ui:include src="/addon/page4.xhtml"/>
                </ui:fragment>
                <ui:fragment rendered="#{ltamprofile.pagemanager.page == 4}">
                    <ui:include src="/addon/page5.xhtml"/>
                </ui:fragment>
                <ui:fragment rendered="#{ltamprofile.pagemanager.page == 5}">
                    <ui:include src="/addon/page6.xhtml"/>
                </ui:fragment>
                <ui:fragment rendered="#{ltamprofile.pagemanager.page == 6}">
                    <ui:include src="/addon/final.xhtml"/>
                </ui:fragment>

                <div class="EmptyBox10"/>
                <f:facet name="footer">
                    <ui:fragment rendered="#{ltamprofile.pagemanager.page == 6}">
                        <p:commandLink
                                styleClass="Fleft"
                                update=":ltamForm:contentpanel"
                                actionListener="#{ltamprofile.firstPage}">
                            <h:graphicImage name="images/startover.png" library="ltam"/>
                        </p:commandLink>
                        <p:commandLink
                                styleClass="Fright"
                                update=":ltamForm:contentpanel"
                                actionListener="#{ltamprofile.forwardData}">
                            <h:graphicImage name="images/openaccount.png" library="ltam"/>
                        </p:commandLink>
                    </ui:fragment>
                    <ui:fragment rendered="#{ltamprofile.pagemanager.page != 6}">
                        <p:commandButton value="Previous" styleClass="Fleft" rendered="#{ltamprofile.pagemanager.prevButtonStat}"
                                         update=":ltamForm:contentpanel"
                                         actionListener="#{ltamprofile.prevPage}"/>
                        <p:commandButton value="Next" styleClass="Fright" rendered="#{ltamprofile.pagemanager.nextButtonStat}"
                                         update=":ltamForm:contentpanel"
                                         actionListener="#{ltamprofile.nextPage}"/>
                    </ui:fragment>
                </f:facet>
            </p:panel>
        </div>
        <div class="Container40 Responsive100">
            <div class="ContainerIndent">
                <p:panel id="graphArea" style="border: 0px; background: transparent"
                         rendered="#{ltamprofile.displayRiskMeter}">
                        <div class="EmptyBox5"></div>
                        <div class="Container100 Responsive100">
                            <p:panel style="border: 0px; background: transparent"
                                     rendered="#{ltamprofile.displayMeter}">
                              <div class="EmptyBox5"></div>
                                <div class="Container100 Responsive100">
                                    <table style="width: 100%">
                                        <tr>
                                            <td colspan="3">
                                                <div class="TexAlCenter" style="font-size: 1.5em">
                                                    Your current risk level is
                                                </div>
                                            </td>
                                        </tr>
                                        <tr>
                                            <td colspan="3">
                                                <div class="EmptyBox5"></div>
                                            </td>
                                        </tr>
                                        <tr>
                                            <td style="width: 5%; text-align: right; vertical-align: middle">Low</td>
                                            <td style="width: 90%; text-align: center; vertical-align: middle">
                                                <ui:repeat var="tlist" value="#{ltamprofile.themeList}">
                                                    <h:graphicImage name="images/riskMeter.svg" library="ltam"
                                                                    rendered="#{ltamprofile.themeData.sortorder != tlist.sortorder}"
                                                                    style="width: 20%; background: transparent"
                                                                    styleClass="Fleft"/>
                                                    <h:graphicImage name="images/SriskMeter.svg" library="ltam"
                                                                    rendered="#{ltamprofile.themeData.sortorder == tlist.sortorder}"
                                                                    style="width: 20%; background: transparent"
                                                                    styleClass="Fleft"/>
                                                </ui:repeat>
                                            </td>
                                            <td style="width: 5%; text-align: left; vertical-align: middle">High </td>
                                        </tr>
                                    </table>
                                </div>
                            </p:panel>

                    </div>
                    <div class="Container100 Responsive100">
                        <div class="EmptyBox10"></div>
                        <div class="Container100 Responsive100">
                            <p:outputPanel id="charts" style="border: 0px; background: transparent">
                                <p:panel style="border: 0px; background: transparent"
                                         rendered="#{ltamprofile.reviewPage ? 'false' : 'true'}">
                                    <div class="Container100  Fleft">
                                        <div class="ContainerIndent">
                                            <p:outputPanel deferred="true">
                                                <p:chart type="pie" model="#{ltamprofile.ltamcharts.pieChart}"
                                                         rendered="#{ltamprofile.ltamcharts.pieChart != null}"
                                                         style="width:100%;height:190px;"
                                                         responsive="true">
                                                </p:chart>
                                            </p:outputPanel>
                                        </div>
                                    </div>
                                    <div class="Container100  Fleft">
                                       <div class="ContainerIndent TexAlCenter">
                                           <h:outputText id="showSliceID" value="#{ltamprofile.selectedPie}"></h:outputText>
                                       </div>
                                    </div>
                                </p:panel>
                                <p:panel style="border: 0px; background: transparent"
                                         rendered="#{ltamprofile.reviewPage}">
                                    <div class="Container100 Fleft">
                                        <div class="ContainerIndent">
                                            <p:dataTable styleClass="invAllocTable"
                                                         value="#{ltamprofile.allocationData.ltamAllocatedAssetList}"
                                                         var="allocatedList" reflow="true">

                                                <p:column style="width: 2%; background-color: #{allocatedList.color};">
                                                    <h:outputText value=" "/>
                                                </p:column>

                                                <p:column styleClass="Wid40 TexAlLeft"
                                                          resizable="true" headerText="Asset">
                                                    <h:outputText value="#{allocatedList.displayname}"/>
                                                </p:column>
                                                <p:column styleClass="Wid20 TexAlRight"
                                                          resizable="true" headerText="Weight">
                                                    <h:outputText value="#{allocatedList.weightAsPercent}">
                                                        <f:convertNumber pattern="##0%"/>
                                                    </h:outputText>
                                                </p:column>
                                                <p:column styleClass="Wid30 TexAlRight"
                                                          resizable="true" headerText="Value">
                                                    <h:outputText value="#{allocatedList.money}">
                                                        <f:convertNumber currencySymbol="$" type="currency"/>
                                                    </h:outputText>
                                                </p:column>
                                            </p:dataTable>
                                        </div>
                                    </div>
                                </p:panel>
                            </p:outputPanel>
                        </div>
                    </div>
                    <div class="Container100 Responsive100">
                    </div>
                </p:panel>
            </div>
        </div>
    </div>
</div>

<p:outputPanel id="dataarea" style="border: 0px"
               rendered="#{ltamprofile.reviewPage}">

    <p:fieldset legend="Proposed Allocation" styleClass="layout-portlets-box" toggleable="true" toggleSpeed="500">
        <div class="Container100 Responsive100">
            <p:dataTable styleClass="invAllocTable"
                         value="#{ltamprofile.allocationData.ltamAllocatedSubAssetList}"
                         var="suballocatedList" reflow="true">
                <p:column style="width: 2%; background-color: #{suballocatedList.color};">
                    <h:outputText value=" "/>
                </p:column>
                <p:column styleClass="Wid20 TexAlLeft"
                          resizable="true" headerText="Asset">
                    <h:outputText value="#{suballocatedList.assetname}"/>
                </p:column>
                <p:column styleClass="Wid20 TexAlLeft"
                          resizable="true" headerText="Class">
                    <h:outputText value="#{suballocatedList.subassetname}"/>
                </p:column>
                <p:column styleClass="Wid20 TexAlRight"
                          resizable="true" headerText="Weight">
                    <h:outputText value="#{suballocatedList.weightAsPercent}">
                        <f:convertNumber pattern="##0.00%"/>
                    </h:outputText>
                </p:column>
                <p:column styleClass="Wid35 TexAlRight"
                          resizable="true" headerText="Value">
                    <h:outputText value="#{suballocatedList.money}">
                        <f:convertNumber currencySymbol="$" type="currency"/>
                    </h:outputText>
                </p:column>

            </p:dataTable>
        </div>

    </p:fieldset>

    <p:fieldset legend="Historical Performance" styleClass="layout-portlets-box" toggleable="true" toggleSpeed="500">
        <div class="Container100 Responsive100">
            <p:dataTable styleClass="invAllocTable"
                         value="#{ltamprofile.themeData.printedPerfData}"
                         var="pdata" reflow="true">
                <p:column style="width: 2%; background-color: #{pdata.color}">
                    <f:facet name="header">
                        <h:outputText value=""/>
                    </f:facet>
                    <h:outputText value=" "/>
                </p:column>
                <p:column styleClass="Wid20 TexAlLeft Fs12">
                    <f:facet name="header">
                        <h:outputText value="Index"/>
                    </f:facet>
                    <h:outputText value="#{pdata.indexname}"/>
                </p:column>

                <p:column styleClass="Wid5 TexAlCenter Fs12">
                    <f:facet name="header">
                        <h:outputText value="#{pdata.header1}"/>
                    </f:facet>
                    <h:outputText value="#{pdata.value1}"/>
                </p:column>

                <p:column styleClass="Wid5 TexAlCenter Fs12"
                          headerText="#{pdata.header2}">
                    <h:outputText value="#{pdata.value2}" styleClass="TexAlCenter">
                    </h:outputText>
                </p:column>
                <p:column styleClass="Wid5 TexAlCenter Fs12"
                          headerText="#{pdata.header3}">
                    <h:outputText value="#{pdata.value3}" styleClass="TexAlCenter">
                    </h:outputText>
                </p:column>
                <p:column styleClass="Wid5 TexAlCenter Fs12"
                          headerText="#{pdata.header4}">
                    <h:outputText value="#{pdata.value4}" styleClass="TexAlCenter">
                    </h:outputText>
                </p:column>
                <p:column styleClass="Wid5 TexAlCenter Fs12"
                          headerText="#{pdata.header5}">
                    <h:outputText value="#{pdata.value5}" styleClass="TexAlCenter">
                    </h:outputText>
                </p:column>
                <p:column styleClass="Wid5 TexAlCenter Fs12"
                          headerText="#{pdata.header6}">
                    <h:outputText value="#{pdata.value6}" styleClass="TexAlCenter">
                    </h:outputText>
                </p:column>
                <p:column styleClass="Wid10 TexAlCenter Fs12"
                          headerText="#{pdata.header7}">
                    <h:outputText value="#{pdata.value7}" styleClass="TexAlCenter">
                    </h:outputText>
                </p:column>
                <p:column styleClass="Wid5 TexAlCenter Fs12"
                          headerText="#{pdata.header8}">
                    <h:outputText value="#{pdata.value8}" styleClass="TexAlCenter">
                    </h:outputText>
                </p:column>
                <p:column styleClass="Wid10 TexAlCenter Fs12"
                          headerText="#{pdata.header9}">
                    <h:outputText value="#{pdata.value9}" styleClass="TexAlCenter">
                    </h:outputText>
                </p:column>
                <p:column styleClass="Wid5 TexAlCenter Fs12"
                          headerText="#{pdata.header10}">
                    <h:outputText value="#{pdata.value10}" styleClass="TexAlCenter">
                    </h:outputText>
                </p:column>
                <p:column styleClass="Wid5 TexAlCenter Fs12"
                          headerText="#{pdata.header11}">
                    <h:outputText value="#{pdata.value11}" styleClass="TexAlCenter">
                    </h:outputText>
                </p:column>
            </p:dataTable>

        </div>
        <div class="EmptyBox30"></div>
        <div class="Container100 Responsive100 ShowOnDesktop">
            <p:chart type="bar" model="#{ltamprofile.ltamcharts.barPerformanceChart}" style="height:300px"
                     rendered="#{ltamprofile.ltamcharts.barPerformanceChart != null}"
                     responsive="true"/>
        </div>
    </p:fieldset>
</p:outputPanel>

</p:panel>

</h:form>


</ui:define>

</ui:composition>
